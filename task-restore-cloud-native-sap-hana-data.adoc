---
sidebar: sidebar
permalink: task-restore-cloud-native-sap-hana-data.html
keywords: cloud native, application data, restore, data files, SAP HANA, database, recovery, Cloud Manager, BlueXP
summary:  Restore the data files and then recover the database.
---

= Restore cloud native SAP HANA database
:hardbreaks:
:nofooter:
:icons: font
:linkattrs:
:imagesdir: ./media/

[.lead]
In the event of data loss, you can restore the data and non-data files and then recover the database.

== Prescripts and postscripts

You can provide prescripts, postscripts, and exit scripts while creating a policy.  These scripts are run on the HANA host while performing restore operation. 

The supported format for scripts are .sh, python script, perl script, and so on.

The prescript and the postscript should be registered by the host admin into `/opt/NetApp/snapcenter/scc/etc/allowed_commands.config file``

`[root@scspa2622265001 etc]# cat allowed_commands.config
command: mount
command: umount
command: /mnt/scripts/pre_script.sh
command: /mnt/scripts/post_script.sh`

== Environmental variables

For the restore workflow, the following environmental variables are available as part of prescript and postscript.

|===
| Environmental Variable | Description

a|
SID
a|
The System Identifier of the HANA Database chosen for restore
a|
BackupName
a|
Backup name chosen for restore operation
a|
UserStoreKeyNames
a|
Configured userstore key for the HANA database
a|
OSDBUser
a|
Configured OSDBUser for the HANA database
|===

== Restore cloud native SAP HANA database

*What you need*

. The SAP HANA system must be in a stopped state.
. You can provide a prescript to stop the SAP HANA system.

*Steps*

.	Click image:icon-action.png[icon to select the action] corresponding to the database that you want to restore and click *View Details*.
.	Click image:icon-action.png[icon to select the action] corresponding to the data backup that you want to use for restoring and click *Restore*.
.	In the *Restore System* page, enter the scripts.
.	Click *Restore*.

*After you finish*

* After restoring, manually recover the SAP HANA system or provide a postscript, which performs the SAP HANA system recovery.

== Restore Non-Data Volume

. In the *Applications* page, select Non-Data Volume from the drop-down box.
. Click image:icon-action.png[icon to select the action] corresponding to the backup that you want to restore and click *Restore*.

== Restore Global Non-Data Volume

*Steps*

. In the *Applications* page, click on the Global Non-Data Volume that you want to restore.
. Click image:icon-action.png[icon to select the action] corresponding to the Global Non-Data Volume that you want to restore and click *Restore*.




