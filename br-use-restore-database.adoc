---
sidebar: sidebar
permalink: br-use-restore-database.html
keywords: backing up, restoring, back up, backup, restore, cloud volumes ontap, aws, azure, s3, blob, google cloud, storagegrid, back up volumes, cloud backup, restore volumes, cost, on-premises ontap, onprem, applications, virtual machines, backup and recovery
summary: You can restore workload data from a snapshot copy, a replicated volume, or from backups stored in object storage.

---

= Restore database workloads
:hardbreaks:
:nofooter:
:icons: font
:linkattrs:
:imagesdir: ./media/

[.lead]
Restore database workloads from a snapshot copy, a replicated volume, or from backups stored in object storage.

Choose the type of restore you want to perform:

* Restore from snapshots
* Restore to a specific point in time: This is helpful if you know the name and location of the file, and the date when it was last in good shape. 
* Restore to the latest backup


NOTE: If the ONTAP version on your system is less than 9.13.1, then you can't restore folders or files if the backup file has been configured with DataLock & Ransomware. In this case, you can restore the entire volume from the backup file and then access the files you need.

*Restore from object storage considerations*

You can restore a volume from any type of backup file, but you can restore a folder or individual files only from a backup file in object storage.

If you select a backup file in object storage, and ransomware protection is active for that backup (if you enabled DataLock and Ransomware Protection in the backup policy), then you are prompted to run an additional ransomware scan on the backup file before restoring the data. We recommend that you scan the backup file for ransomware. (You'll incur extra egress costs from your cloud provider to access the contents of the backup file.)


== Where to install the BlueXP Connector

To complete a restore operation, the Connector can be installed in the following locations:

ifdef::aws[]
* For Amazon S3, the Connector can be deployed in AWS or in your premises. 
endif::aws[]
ifdef::azure[]
* For Azure Blob, the Connector can be deployed in Azure or in your premises. 
endif::azure[]
ifdef::gcp[]
* For Google Cloud Storage, the Connector must be deployed in your Google Cloud Platform VPC.
endif::gcp[]
* For StorageGRID, the Connector must be deployed in your premises; with or without internet access.
//* For ONTAP S3, the Connector can be deployed in your premises (with or without internet access) or in a cloud provider environment

NOTE: References to "on-premises ONTAP systems" includes FAS, AFF, and ONTAP Select systems.



== How restoring workloads works

When you restore workloads, the following occurs: 

* When you restore a workload from a backup file, BlueXP backup and recovery creates a _new_ volume using the data from the backup. 

* When you restore from a replicated workload, you can restore the workload to the original working environment or to a Cloud Volumes ONTAP or on-premises ONTAP system.
+
image:diagram_browse_restore_volume.png["A diagram that shows the flow to perform a volume restore operation using Browse & Restore."]

* When you restore a backup from object storage, you can restore the data to a volume in the original working environment, to a different working environment that's located in the same cloud account as the source working environment, or to an on-premises ONTAP system.


== When to use Quick Restore 

When you restore a cloud backup to a Cloud Volumes ONTAP system using ONTAP 9.13.0 or greater or to an on-premises ONTAP system running ONTAP 9.14.1, you'll have the option to perform a _quick restore_ operation. The quick restore is ideal for disaster recovery situations where you need to provide access to a volume as soon as possible. A quick restore restores the metadata from the backup file to a volume instead of restoring the entire backup file. Quick restore is not recommended for performance or latency-sensitive applications, and it is not supported with backups in archived storage.

//NOTE: Quick restore is supported for FlexGroup volumes only if the source system from which the cloud backup was created was running ONTAP 9.12.1 or greater. And it is supported for SnapLock volumes only if the source system was running ONTAP 9.11.0 or greater.

== Restore workload data

Restoring database workloads is available in the Preview 2025 version of BlueXP backup and recovery. 

You can restore workloads using the following strategies: 

* Restore workloads from snapshots
* Restore to specific point in time
* Restore to the latest backup


.Steps
. From the BlueXP menu, select *Protection > Backup and recovery*.
. From the BlueXP backup and restore menu, select *Restore*. 
+
image:screen-br-restore-options2.png[A screenshot showing the Restore options.]
. Select the snapshot that you want to restore. 
. Select *Next*. 
. Select snapshot location of local, secondary storage, or object storage. 
* If you chose local, review the details. 
* If you chose secondary storage, select the destination or destinations.
. Select *Next*.
. Continue with one of the following: 
** Restore workloads from snapshots
** Restore to specific point in time
** Restore to the latest backup


=== Restore workloads from snapshots

. From the Restore page, select *Restore from snapshots*. 
+
image:screen-br-restore-destination-original-location.png[A screenshot showing the Restore Destination details page.]
. Select *Next*. 
. In the Destination details page, enter the following infomation: 
** *Destination settings*: Choose whether you want to restore the data to its original location or to an alternate location. For an alternate location, select the host name and instance, enter the database name, and enter the destination path.
** *Pre-restore options*: 
*** *Preserve original database name*: During the restore, the original database name is preserved. 
*** *Retain SQL database replication settings*: Keeps the replication settings for the SQL database after the restore operation.
*** *Prescript*: Enter the full path for a script that should be run before the restore operation, any arguments that the script takes, and how long to wait for the script to complete.
** *Post-restore options*: 
*** *Operational*, but unavailable for restoring additional transaction logs. This brings the database back online after transaction log backups are applied. 
*** *Non-operational*, but available for restoring additional transaction logs. Maintains the database in a non-operational state after the restore operation while restoring transaction log backups. This option is useful for restoring additional transaction logs.
*** *Read-only mode* and available for restoring additional transaction logs. Restores the database in a read-only mode and applies transaction log backups. 
*** *Postscript*: Enter the full path for a script that should be run after the restore operation and any arguments that the script takes.

 
. Select *Restore*.


=== Restore to specific point in time

BlueXP backup and recovery uses logs and the most recent snapshots to create a point-in-time restore of your data. 

. From the Restore page, select *Restore to specific point in time*. 
+
image:screen-br-restore-point-in-time.png[A screenshot showing the Restore to a specific point in time page]
. Select *Next*. 
. In the Restore to a specific point in time page, enter the following infomation: 

** *Date and time for data restoration*: Enter the exact date and time of the data that you want to restore. This date and time is from the Microsoft SQL Server Database host. 

. Select *Search*. 
. Select the snapshot that you want to restore.
. Select *Next*.

. In the Destination details page, enter the following infomation: 
** *Destination settings*: Choose whether you want to restore the data to its original location or to an alternate location. For an alternate location, select the host name and instance, enter the database name, and enter the destination path.
** *Pre-restore options*: 
*** *Preserve original database name*: During the restore, the original database name is preserved. 
*** *Retain SQL database replication settings*: Keeps the replication settings for the SQL database after the restore operation.
*** *Prescript*: Enter the full path for a script that should be run before the restore operation, any arguments that the script takes, and how long to wait for the script to complete.
** *Post-restore options*: 
*** *Operational*, but unavailable for restoring additional transaction logs. This brings the database back online after transaction log backups are applied. 
*** *Non-operational*, but available for restoring additional transaction logs. Maintains the database in a non-operational state after the restore operation while restoring transaction log backups. This option is useful for restoring additional transaction logs.
*** *Read-only mode* and available for restoring additional transaction logs. Restores the database in a read-only mode and applies transaction log backups. 
*** *Postscript*: Enter the full path for a script that should be run after the restore operation and any arguments that the script takes.

 
. Select *Restore*.


=== Restore to the latest backup

This option uses the latest full and log backups to restore your data to the last good state. The system scans logs from the last snapshot to the present. The process tracks changes and activities to restore the most recent and accurate version of your data. 

. From the Restore page, select *Restore to the latest backup*. 
+
image:screen-br-restore-to-latest-state.png[A screenshot showing the Restore to latest state page]
. Select *Next*. 
. In the Restore to the latest state page, select the snapshot location of local, secondary storage, or object storage.

    
. Select *Next*.

. In the Destination details page, enter the following infomation: 
** *Destination settings*: Choose whether you want to restore the data to its original location or to an alternate location. For an alternate location, select the host name and instance, enter the database name, and enter the destination path.
** *Pre-restore options*: 
*** *Preserve original database name*: During the restore, the original database name is preserved. 
*** *Retain SQL database replication settings*: Keeps the replication settings for the SQL database after the restore operation.
*** *Create transaction log backup before restore*: Creates a transaction log backup before the restore operation.
*** *Quit restore if transaction log backup before retore fails*: Stops the restore operation if the transaction log backup fails.

*** *Prescript*: Enter the full path for a script that should be run before the restore operation, any arguments that the script takes, and how long to wait for the script to complete.

** *Post-restore options*: 
*** *Operational*, but unavailable for restoring additional transaction logs. This brings the database back online after transaction log backups are applied. 
*** *Non-operational*, but available for restoring additional transaction logs. Maintains the database in a non-operational state after the restore operation while restoring transaction log backups. This option is useful for restoring additional transaction logs.
*** *Read-only mode* and available for restoring additional transaction logs. Restores the database in a read-only mode and applies transaction log backups. 
*** *Postscript*: Enter the full path for a script that should be run after the restore operation and any arguments that the script takes.

  
. Select *Restore*.


//== Restore workloads from cloud storage 

//When you restore workloads from cloud providers, you might be prompted for additional information. 

//[TO BR TEAM: Is this the correct information?]   


//ifdef::aws[]
//* When restoring from Amazon S3, select the IPspace in the ONTAP cluster where the destination volume will reside, enter the access key and secret key for the user you created to give the ONTAP cluster access to the S3 bucket, and optionally choose a private VPC endpoint for secure data transfer.
//endif::aws[]
//ifdef::azure[]
//* When restoring from Azure Blob, select the IPspace in the ONTAP cluster where the destination volume will reside, select the Azure Subscription to access the object storage, and optionally choose a private endpoint for secure data transfer by selecting the VNet and Subnet.
//endif::azure[]
//ifdef::gcp[]
//* When restoring from Google Cloud Storage, select the Google Cloud Project and the Access Key and Secret Key to access the object storage, the region where the backups are stored, and the IPspace in the ONTAP cluster where the destination volume will reside.
//endif::gcp[]
//* When restoring from StorageGRID, enter the FQDN of the StorageGRID server and the port that ONTAP should use for HTTPS communication with StorageGRID, select the Access Key and Secret Key needed to access the object storage, and the IPspace in the ONTAP cluster where the destination volume will reside.
//* When restoring from ONTAP S3, enter the FQDN of the ONTAP S3 server and the port that ONTAP should use for HTTPS communication with ONTAP S3, select the Access Key and Secret Key needed to access the object storage, and the IPspace in the ONTAP cluster where the destination volume will reside.


//* When restoring a backup from object storage to a Cloud Volumes ONTAP system using ONTAP 9.13.0 or greater or to an on-premises ONTAP system running ONTAP 9.14.1, you'll have the option to perform a _quick restore_ operation.

//* And if you are restoring the volume from a backup file that resides in an archival storage tier (available starting with ONTAP 9.10.1), then you can select the Restore Priority.

//ifdef::aws[]
//link:reference-aws-backup-tiers.html#restore-data-from-archival-storage[Learn more about restoring from AWS archival storage].
//endif::aws[]
//ifdef::azure[]
//link:reference-azure-backup-tiers.html#restore-data-from-archival-storage[Learn more about restoring from Azure archival storage].
//endif::azure[]
//ifdef::gcp[]
//link:reference-google-backup-tiers.html#restore-data-from-archival-storage[Learn more about restoring from Google archival storage]. Backup files in the Google Archive storage tier are restored almost immediately, and require no Restore Priority.
//endif::gcp[]

//.Steps
//. Click *Next* to choose whether you want to do a Normal restore or a Quick Restore process: 
//+
//image:screenshot_restore_browse_quick_restore.png[A screenshot showing the normal and Quick restore processes.]
//+
//* *Normal restore*: Use normal restore on volumes that require high performance. Volumes will not be available until the restore process is complete. 
//* *Quick restore*: Restored volumes and data will be available immediately. Do not use this on volumes that require high performance because during the quick restore process, access to the data might be slower than usual. 


//. Click *Restore* and you are returned to the Restore Dashboard so you can review the progress of the restore operation.

//NOTE: Restoring a volume from a backup file that resides in archival storage can take many minutes or hours depending on the archive tier and the restore priority. You can click the *Job Monitoring* tab to see the restore progress.


