---
sidebar: sidebar
permalink: br-use-restore-browse-and-restore.html
keywords: backing up, restoring, back up, backup, restore, cloud volumes ontap, aws, azure, s3, blob, google cloud, storagegrid, back up volumes, cloud backup, restore volumes, cost, on-premises ontap, onprem, applications, virtual machines, backup and recovery
summary: Restore a specific volume, folder, or file from the last week or month -- and you know the name and location of the file, and the date when it was last in good shape. You can restore workload data from a snapshot copy, a replicated volume, or from backups stored in object storage.

---

= Restore workloads using the Browse and restore method
:hardbreaks:
:nofooter:
:icons: font
:linkattrs:
:imagesdir: ./media/

[.lead]
_Browse & restore_ is typically better when you need to restore a specific volume, folder, or file from the last week or month -- and you know the name and location of the file, and the date when it was last in good shape. You can restore workload data from a snapshot copy, a replicated volume, or from backups stored in object storage.


== What you need to know before you start

Before you start restoring a volume, folder, or file, you should know the name of the volume from which you want to restore, the name of the working environment and SVM where the volume resides, and the approximate date of the backup file that you want to restore from. 



ifdef::aws[]
link:reference-aws-backup-tiers.html[Learn more about restoring from AWS archival storage].
endif::aws[]
ifdef::azure[]
link:reference-azure-backup-tiers.html[Learn more about restoring from Azure archival storage].
endif::azure[]
ifdef::gcp[]
link:reference-google-backup-tiers.html[Learn more about restoring from Google archival storage].
endif::gcp[]

NOTE: The High priority isn't supported when restoring data from Azure archival storage to StorageGRID systems.

=== Browse & Restore working environments and object storage providers

You can restore workload data from a backup file that resides in a secondary working environment (a replicated volume) or in object storage (a backup file) to the following working environments. Snapshots reside on the source working environment and can be restored only to that same system.

*Note:* You can restore a volume from any type of backup file, but you can restore a folder or individual files only from a backup file in object storage.

[cols=4*,options="header",cols="25,25,25,25",width="100%"]
|===

|*From Object Store (Backup)* | *From Primary (Snapshot)* | *From Secondary System (Replication)* | To Destination Working Environment
ifdef::aws[]
| Amazon S3 | Cloud Volumes ONTAP in AWS
On-premises ONTAP system
| Cloud Volumes ONTAP in AWS
On-premises ONTAP system
endif::aws[]

ifdef::azure[]
| Azure Blob | Cloud Volumes ONTAP in Azure
On-premises ONTAP system
| Cloud Volumes ONTAP in Azure
On-premises ONTAP system
endif::azure[]

ifdef::gcp[]
| Google Cloud Storage | Cloud Volumes ONTAP in Google
On-premises ONTAP system
| Cloud Volumes ONTAP in Google
On-premises ONTAP system
endif::gcp[]
| NetApp StorageGRID | On-premises ONTAP system |On-premises ONTAP system
Cloud Volumes ONTAP
|To on-premises ONTAP system
|ONTAP S3 | On-premises ONTAP system | On-premises ONTAP system 
Cloud Volumes ONTAP
| To on-premises ONTAP system
|===



=== Where to install the Connector

For Browse & Restore, the Connector can be installed in the following locations:

ifdef::aws[]
* For Amazon S3, the Connector can be deployed in AWS or in your premises 
endif::aws[]
ifdef::azure[]
* For Azure Blob, the Connector can be deployed in Azure or in your premises 
endif::azure[]
ifdef::gcp[]
* For Google Cloud Storage, the Connector must be deployed in your Google Cloud Platform VPC
endif::gcp[]
* For StorageGRID, the Connector must be deployed in your premises; with or without internet access
* For ONTAP S3, the Connector can be deployed in your premises (with or without internet access) or in a cloud provider environment

Note that references to "on-premises ONTAP systems" includes FAS, AFF, and ONTAP Select systems.

NOTE: If the ONTAP version on your system is less than 9.13.1, then you can't restore folders or files if the backup file has been configured with DataLock & Ransomware. In this case, you can restore the entire volume from the backup file and then access the files you need.

== Restore volumes using Browse & Restore

When you use Browse and Restore to restore volumes, the following occurs: 

* When you restore a volume from a backup file, BlueXP backup and recovery creates a _new_ volume using the data from the backup. 

* When you restore from a replicated volume, you can restore the volume to the original working environment or to a Cloud Volumes ONTAP or on-premises ONTAP system.
+
image:diagram_browse_restore_volume.png["A diagram that shows the flow to perform a volume restore operation using Browse & Restore."]

* When you restore a backup from object storage, you can restore the data to a volume in the original working environment, to a different working environment that's located in the same cloud account as the source working environment, or to an on-premises ONTAP system.


=== When to use Quick Restore 

When you restore a cloud backup to a Cloud Volumes ONTAP system using ONTAP 9.13.0 or greater or to an on-premises ONTAP system running ONTAP 9.14.1, you'll have the option to perform a _quick restore_ operation. The quick restore is ideal for disaster recovery situations where you need to provide access to a volume as soon as possible. A quick restore restores the metadata from the backup file to a volume instead of restoring the entire backup file. Quick restore is not recommended for performance or latency-sensitive applications, and it is not supported with backups in archived storage.

NOTE: Quick restore is supported for FlexGroup volumes only if the source system from which the cloud backup was created was running ONTAP 9.12.1 or greater. And it is supported for SnapLock volumes only if the source system was running ONTAP 9.11.0 or greater.

== Restore workload data on volumes using Browse & Restore


.Steps

. From the BlueXP menu, select *Protection > Backup and recovery*.

. Click the *Restore* tab and the Restore Dashboard is displayed.

. From the _Browse & Restore_ section, click *Restore Volume*.
+
image:screenshot_restore_volume_selection.png[A screenshot of selecting the Restore Volumes button from the Restore Dashboard.]

. In the _Select Source_ page, navigate to the backup file for the volume you want to restore. Select the *Working Environment*, the *Volume*, and the *Backup* file that has the date/time stamp from which you want to restore.
+
The *Location* column shows whether the backup file (Snapshot) is *Local* (a Snapshot copy on the source system), *Secondary* (a replicated volume on a secondary ONTAP system), or *Object Storage* (a backup file in object storage). Choose the file that you want to restore.
+
image:screenshot_restore_select_volume_snapshot.png["A screenshot of selecting the working environment, volume, and volume backup file that you want to restore."]

. Click *Next*.
+
Note that if you select a backup file in object storage, and ransomware protection is active for that backup (if you enabled DataLock and Ransomware Protection in the backup policy), then you are prompted to run an additional ransomware scan on the backup file before restoring the data. We recommend that you scan the backup file for ransomware. (You'll incur extra egress costs from your cloud provider to access the contents of the backup file.)

. In the _Select Destination_ page, select the *Working Environment* where you want to restore the volume.
+
image:screenshot_restore_select_work_env_volume.png[A screenshot of selecting the destination working environment for the volume you want to restore.]
+
. When restoring a backup file from object storage, if you select an on-premises ONTAP system and you haven't already configured the cluster connection to the object storage, you are prompted for additional information:
+
ifdef::aws[]
* When restoring from Amazon S3, select the IPspace in the ONTAP cluster where the destination volume will reside, enter the access key and secret key for the user you created to give the ONTAP cluster access to the S3 bucket, and optionally choose a private VPC endpoint for secure data transfer.
endif::aws[]
ifdef::azure[]
* When restoring from Azure Blob, select the IPspace in the ONTAP cluster where the destination volume will reside, select the Azure Subscription to access the object storage, and optionally choose a private endpoint for secure data transfer by selecting the VNet and Subnet.
endif::azure[]
ifdef::gcp[]
* When restoring from Google Cloud Storage, select the Google Cloud Project and the Access Key and Secret Key to access the object storage, the region where the backups are stored, and the IPspace in the ONTAP cluster where the destination volume will reside.
endif::gcp[]
* When restoring from StorageGRID, enter the FQDN of the StorageGRID server and the port that ONTAP should use for HTTPS communication with StorageGRID, select the Access Key and Secret Key needed to access the object storage, and the IPspace in the ONTAP cluster where the destination volume will reside.
* When restoring from ONTAP S3, enter the FQDN of the ONTAP S3 server and the port that ONTAP should use for HTTPS communication with ONTAP S3, select the Access Key and Secret Key needed to access the object storage, and the IPspace in the ONTAP cluster where the destination volume will reside.

. Enter the name you want to use for the restored volume, and select the Storage VM and Aggregate where the volume will reside. When restoring a FlexGroup volume you'll need to select multiple aggregates. By default, *<source_volume_name>_restore* is used as the volume name.
+
image:screenshot_restore_new_vol_name.png[A screenshot of entering the name of the new volume that you want to restore.]
+
When restoring a backup from object storage to a Cloud Volumes ONTAP system using ONTAP 9.13.0 or greater or to an on-premises ONTAP system running ONTAP 9.14.1, you'll have the option to perform a _quick restore_ operation.
+
And if you are restoring the volume from a backup file that resides in an archival storage tier (available starting with ONTAP 9.10.1), then you can select the Restore Priority.
+
ifdef::aws[]
link:reference-aws-backup-tiers.html#restore-data-from-archival-storage[Learn more about restoring from AWS archival storage].
endif::aws[]
ifdef::azure[]
link:reference-azure-backup-tiers.html#restore-data-from-archival-storage[Learn more about restoring from Azure archival storage].
endif::azure[]
ifdef::gcp[]
link:reference-google-backup-tiers.html#restore-data-from-archival-storage[Learn more about restoring from Google archival storage]. Backup files in the Google Archive storage tier are restored almost immediately, and require no Restore Priority.
endif::gcp[]

. Click *Next* to choose whether you want to do a Normal restore or a Quick Restore process: 
+
image:screenshot_restore_browse_quick_restore.png[A screenshot showing the normal and Quick restore processes.]
+
* *Normal restore*: Use normal restore on volumes that require high performance. Volumes will not be available until the restore process is complete. 
* *Quick restore*: Restored volumes and data will be available immediately. Do not use this on volumes that require high performance because during the quick restore process, access to the data might be slower than usual. 


. Click *Restore* and you are returned to the Restore Dashboard so you can review the progress of the restore operation.

.Result

BlueXP backup and recovery creates a new volume based on the backup you selected. 
//You can link:task-manage-backups-ontap.html[manage the backup settings for this new volume] as required.

Note that restoring a volume from a backup file that resides in archival storage can take many minutes or hours depending on the archive tier and the restore priority. You can click the *Job Monitoring* tab to see the restore progress.



=== Restore folders and files using Browse & Restore

If you need to restore only a few files from an ONTAP volume backup, you can choose to restore a folder or individual files instead of restoring the entire volume. You can restore folders and files to an existing volume in the original working environment, or to a different working environment that's using the same cloud account. You can also restore folders and files to a volume on an on-premises ONTAP system.

NOTE: You can restore a folder or individual files only from a backup file in object storage at this time. Restoring files and folders is not currently supported from a local Snapshot copy or from a backup file that resides in a secondary working environment (a replicated volume).

If you select multiple files, all the files are restored to the same destination volume that you choose. So if you want to restore files to different volumes, you'll need to run the restore process multiple times.

When using ONTAP 9.13.0 or greater, you can restore a folder along with all files and sub-folders within it. When using a version of ONTAP before 9.13.0, only files from that folder are restored - no sub-folders, or files in sub-folders, are restored.

[NOTE] 
====
* If the backup file has been configured with DataLock & Ransomware protection, then folder-level restore is supported only if the ONTAP version is 9.13.1 or greater. If you are using an earlier version of ONTAP, you can restore the entire volume from the backup file and then access the folder and files you need.
* If the backup file resides in archival storage, then folder-level restore is supported only if the ONTAP version is 9.13.1 or greater. If you are using an earlier version of ONTAP, you can restore the folder from a newer backup file that has not been archived, or you can restore the entire volume from the archived backup and then access the folder and files you need.


* With ONTAP 9.15.1, you can restore FlexGroup folders using the "Browse and restore" option. This feature is in a Technology Preview mode.
+
You can test it using a special flag described in the https://community.netapp.com/t5/Tech-ONTAP-Blogs/BlueXP-Backup-and-Recovery-July-2024-Release/ba-p/453993#toc-hId-1830672444[BlueXP backup and recovery July 2024 Release blog^].
====

==== Prerequisites

* The ONTAP version must be 9.6 or greater to perform _file_ restore operations.
* The ONTAP version must be 9.11.1 or greater to perform _folder_ restore operations. ONTAP version 9.13.1 is required if the data is in archival storage, or if the backup file is using DataLock and Ransomware protection.
* The ONTAP version must be 9.15.1 p2 or greater to restore FlexGroup directories using the Browse and restore option.

==== Folder and file restore process

The process goes like this:

. When you want to restore a folder, or one or more files, from a volume backup, click the *Restore* tab, and click *Restore Files or Folder* under _Browse & Restore_.

. Select the source working environment, volume, and backup file in which the folder or file(s) reside.

. BlueXP backup and recovery displays the folders and files that exist within the selected backup file.

. Select the folder or file(s) that you want to restore from that backup.

. Select the destination location where you want the folder or file(s) to be restored (the working environment, volume, and folder), and click *Restore*.

. The file(s) are restored.

image:diagram_browse_restore_file.png["A diagram that shows the flow to perform a file restore operation using Browse & Restore."]

As you can see, you need to know the working environment name, volume name, backup file date, and folder/file name to perform a folder or file restore.

==== Restore folders and files

Follow these steps to restore folders or files to a volume from an ONTAP volume backup. You should know the name of the volume and the date of the backup file that you want to use to restore the folder or file(s). This functionality uses Live Browsing so that you can view the list of directories and files within each backup file.

The following video shows a quick walkthrough of restoring a single file:

video::9Og5agUWyRk[youtube, width=848, height=480, start=165]

.Steps

. From the BlueXP menu, select *Protection > Backup and recovery*.

. Click the *Restore* tab and the Restore Dashboard is displayed.

. From the _Browse & Restore_ section, click *Restore Files or Folder*.
+
image:screenshot_restore_files_selection.png[A screenshot of selecting the Restore Files or Folder button from the Restore Dashboard.]

. In the _Select Source_ page, navigate to the backup file for the volume that contains the folder or files you want to restore. Select the *Working Environment*, the *Volume*, and the *Backup* that has the date/time stamp from which you want to restore files.
+
image:screenshot_restore_select_source.png[A screenshot of selecting the volume and backup for the items you want to restore.]

. Click *Next* and the list of folders and files from the volume backup are displayed.
+
If you are restoring folders or files from a backup file that resides in an archival storage tier, then you can select the Restore Priority.
+
ifdef::aws[]
link:reference-aws-backup-tiers.html#restore-data-from-archival-storage[Learn more about restoring from AWS archival storage].
endif::aws[]
ifdef::azure[]
link:reference-azure-backup-tiers.html#restore-data-from-archival-storage[Learn more about restoring from Azure archival storage].
endif::azure[]
ifdef::gcp[]
link:reference-google-backup-tiers.html#restore-data-from-archival-storage[Learn more about restoring from Google archival storage]. Backup files in the Google Archive storage tier are restored almost immediately, and require no Restore Priority.
endif::gcp[]
+
And if ransomware protection is active for the backup file (if you enabled DataLock and Ransomware Protection in the backup policy), then you are prompted to run an additional ransomware scan on the backup file before restoring the data. We recommend that you scan the backup file for ransomware. (You'll incur extra egress costs from your cloud provider to access the contents of the backup file.)
+
image:screenshot_restore_select_files.png[A screenshot of the Select Items page so you can navigate to the items you want to restore.]

. In the _Select Items_ page, select the folder or file(s) that you want to restore and click *Continue*. To assist you in finding the item:
* You can click the folder or file name if you see it.
* You can click the search icon and enter the name of the folder or file to navigate directly to the item.
* You can navigate down levels in folders using the image:button_subfolder.png[""] button at the end of the row to find specific files.
+
As you select files they are added to the left side of the page so you can see the files that you have already chosen. You can remove a file from this list if needed by clicking the *x* next to the file name.

. In the _Select Destination_ page, select the *Working Environment* where you want to restore the items.
+
image:screenshot_restore_select_work_env.png[A screenshot of selecting the destination working environment for the items you want to restore.]
+
If you select an on-premises cluster and you haven't already configured the cluster connection to the object storage, you are prompted for additional information:
+
ifdef::aws[]
* When restoring from Amazon S3, enter the IPspace in the ONTAP cluster where the destination volume resides, and the AWS Access Key and Secret Key needed to access the object storage. You can also select a Private Link Configuration for the connection to the cluster.
endif::aws[]
ifdef::azure[]
* When restoring from Azure Blob, enter the IPspace in the ONTAP cluster where the destination volume resides. You can also select a Private Endpoint Configuration for the connection to the cluster.
endif::azure[]
ifdef::gcp[]
* When restoring from Google Cloud Storage, enter the IPspace in the ONTAP cluster where the destination volumes reside, and the Access Key and Secret Key needed to access the object storage.
endif::gcp[]
* When restoring from StorageGRID, enter the FQDN of the StorageGRID server and the port that ONTAP should use for HTTPS communication with StorageGRID, enter the Access Key and Secret Key needed to access the object storage, and the IPspace in the ONTAP cluster where the destination volume resides.
//* When restoring from ONTAP S3, enter the FQDN of the ONTAP S3 server and the port that ONTAP should use for HTTPS communication with ONTAP S3, select the Access Key and Secret Key needed to access the object storage, and the IPspace in the ONTAP cluster where the destination volume will reside.

. Then select the *Volume* and the *Folder* where you want to restore the folder or file(s).
+
image:screenshot_restore_select_dest.png[A screenshot of selecting the volume and folder for the files you want to restore.]
+
You have a few options for the location when restoring folders and file(s).

+
* When you have chosen *Select Target Folder*, as shown above:
+
** You can select any folder.
** You can hover over a folder and click image:button_subfolder.png[""] at the end of the row to drill down into subfolders, and then select a folder.

+
* If you have selected the same destination Working Environment and Volume as where the source folder/file was located, you can select *Maintain Source Folder Path* to restore the folder, or file(s), to the same folder where they existed in the source structure. All the same folders and sub-folders must already exist; folders are not created. When restoring files to their original location, you can choose to overwrite the source file(s) or to create new file(s).

. Click *Restore* and you are returned to the Restore Dashboard so you can review the progress of the restore operation. You can also click the *Job Monitoring* tab to see the restore progress.


